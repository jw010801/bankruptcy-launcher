<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>설국열차 서바이벌 런처</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 커스텀 타이틀바 -->
    <div class="titlebar">
        <div class="titlebar-drag-region">
            <div class="titlebar-icon">
                <img src="assets/icon-small.png" alt="아이콘">
            </div>
            <div class="titlebar-title">설국열차 서바이벌 런처</div>
        </div>
        <div class="titlebar-controls">
            <button class="titlebar-button" id="minimize-btn">─</button>
            <button class="titlebar-button close" id="close-btn">✕</button>
        </div>
    </div>



    <!-- 메인 컨테이너 -->
    <div class="container">
        <!-- 헤더 -->
        <header class="header">
            <div class="server-info">
                <div class="server-status">
                    <span class="status-label">서버 상태:</span>
                    <span id="server-status" class="status">확인 중...</span>
                </div>
                <div class="player-count">
                    <span class="count-label">플레이어:</span>
                    <span id="server-players">0/20</span>
                </div>
            </div>
        </header>

        <!-- 메인 영역 -->
        <div class="main-area">
            <!-- 메인 콘텐츠 -->
            <main class="main-content">
                <!-- 게임 제목 -->
                <div class="game-title">
                    <h1>설국열차 서바이벌</h1>
                    <p>극한의 추위에서 살아남으세요!</p>
                </div>

                <!-- 플레이 버튼 -->
                <div class="play-section">
                    <button id="play-button" class="play-button">
                        <img src="assets/play.png" alt="플레이">
                        <span id="play-btn-text">게임 시작</span>
                    </button>
                    
                    <!-- 게임 시작 진행률 표시 -->
                    <div id="play-progress" class="play-progress" style="display: none;">
                        <div class="play-progress-bar">
                            <div id="play-progress-fill" class="play-progress-fill"></div>
                        </div>
                        <div id="play-progress-text" class="play-progress-text">준비 중...</div>
                    </div>
                </div>

                <!-- 뉴스 및 정보 -->
                <section class="news-section">
                    <div class="news-header">
                        <h3>📢 서버 소식</h3>
                        <button id="refresh-news" class="refresh-button" title="뉴스 새로고침">🔄</button>
                    </div>
                    <!-- 뉴스 컨테이너 (스크롤 가능) -->
                    <div id="news-container" class="news-container">
                        <div class="news-loading">
                            <div class="news-item">
                                <div class="news-date">로딩 중...</div>
                                <div class="news-title">서버 소식을 불러오는 중입니다</div>
                                <div class="news-content">잠시만 기다려주세요...</div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>

            <!-- 사이드바 -->
            <aside class="sidebar">
                <!-- 로그인 상태에 따른 표시 -->
                <div id="login-section" class="login-section">
                    <h3>🔐 계정 로그인</h3>
                    <div class="login-form">
                        <button id="login-button">Microsoft 로그인</button>
                        <p class="login-info">Microsoft 계정으로 정품 인증하세요</p>
                        <p class="login-note">※ 정품 마인크래프트 계정이 필요합니다</p>
                    </div>
                </div>

                <div id="user-section" class="user-info" style="display: none;">
                    <div class="user-avatar">
                        <img src="assets/icon-small.png" alt="사용자 아바타">
                    </div>
                    <div class="user-details">
                        <div class="username">플레이어</div>
                        <div class="user-status">온라인</div>
                    </div>
                    <button id="logout-button" class="logout-button">로그아웃</button>
                </div>

                <!-- 서버 통계 섹션 -->
                <div class="server-stats-section">
                    <h3>🚂 열차 현황</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">총 생존자</span>
                            <span class="stat-value" id="total-players">156</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">활성 광산</span>
                            <span class="stat-value" id="active-mines">3</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">탈출 성공자</span>
                            <span class="stat-value" id="escaped-players">7</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">최고 보석</span>
                            <span class="stat-value" id="richest-player">💎25</span>
                        </div>
                    </div>
                </div>

                <!-- 게임 가이드 섹션 -->
                <div class="game-guide-section">
                    <h3>🚂 서바이벌 가이드</h3>
                    <div class="guide-tips">
                        <div class="tip-item">
                            <span class="tip-icon">❄️</span>
                            <span class="tip-text">체온 유지로 생존 확률 증가</span>
                        </div>
                        <div class="tip-item">
                            <span class="tip-icon">⛏️</span>
                            <span class="tip-text">광산에서 보석 채굴하여 부 축적</span>
                        </div>
                        <div class="tip-item">
                            <span class="tip-icon">🎯</span>
                            <span class="tip-text">미니게임으로 추가 생존 점수</span>
                        </div>
                        <div class="tip-item">
                            <span class="tip-icon">🏃</span>
                            <span class="tip-text">기관실 도달 시 최종 탈출 성공</span>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <button id="settings-btn" class="action-button">
                        <span class="icon">⚙️</span>
                        <span>설정</span>
                    </button>
                    <button id="help-btn" class="action-button">
                        <span class="icon">❓</span>
                        <span>도움말</span>
                    </button>
                </div>
            </aside>
        </div>
    </div>

    <!-- 설정 모달 -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>⚙️ 런처 설정</h2>
                <button id="settings-close" class="close-button">✕</button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label for="server-ip">서버 주소:</label>
                    <input type="text" id="server-ip" placeholder="localhost:25565">
                </div>
                
                <div class="setting-group">
                    <label for="username">사용자명:</label>
                    <input type="text" id="username" placeholder="플레이어 이름">
                </div>
                
                <div class="setting-group">
                    <label for="memory-allocation">메모리 할당:</label>
                    <select id="memory-allocation">
                        <option value="2G">2GB (최소)</option>
                        <option value="4G" selected>4GB (권장)</option>
                        <option value="6G">6GB (셰이더 사용)</option>
                        <option value="8G">8GB (고성능)</option>
                        <option value="12G">12GB (최고 성능)</option>
                        <option value="16G">16GB (극한 성능)</option>
                    </select>
                    <div class="setting-description">
                        <strong>💡 메모리 할당 가이드:</strong><br>
                        • <span style="color: #e74c3c;">2GB</span>: 바닐라 마인크래프트<br>
                        • <span style="color: #f39c12;">4GB</span>: 가벼운 모드팩<br>
                        • <span style="color: #27ae60;">6GB+</span>: 셰이더 + 고해상도 텍스처<br>
                        • <span style="color: #3498db;">8GB+</span>: 대용량 모드팩 + 셰이더
                    </div>
                </div>
                
                <div class="setting-group">
                    <label for="performance-profile">성능 프로파일:</label>
                    <select id="performance-profile">
                        <option value="balanced">⚖️ 균형 (기본)</option>
                        <option value="performance">🚀 성능 우선</option>
                        <option value="quality">🎨 화질 우선</option>
                        <option value="battery">🔋 배터리 절약</option>
                    </select>
                    <div class="setting-description">
                        <strong>🎯 성능 프로파일 설명:</strong><br>
                        • <strong>균형</strong>: 안정적인 FPS와 적당한 화질<br>
                        • <strong>성능 우선</strong>: 최대 FPS, GPU 가속 강화<br>
                        • <strong>화질 우선</strong>: 높은 해상도, 안티앨리어싱<br>
                        • <strong>배터리 절약</strong>: 저전력 모드, FPS 제한
                    </div>
                </div>
                
                <div class="setting-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="gpu-optimization" checked>
                        <span class="checkmark"></span>
                        GPU 가속 최적화
                    </label>
                    <div class="setting-description">
                        <small>OpenGL 최적화, DirectDraw 비활성화, LWJGL 성능 향상 등</small>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="auto-connect">
                        <span class="checkmark"></span>
                        서버 자동 접속
                    </label>
                </div>
                
                <div class="setting-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="enable-bgm">
                        <span class="checkmark"></span>
                        배경음악 재생
                    </label>
                </div>
                
                <div class="setting-group">
                    <label for="launcher-action">게임 시작 후 런처 동작:</label>
                    <select id="launcher-action">
                        <option value="close" selected>🔋 런처 종료 (추천 - 리소스 0%)</option>
                        <option value="minimize">📱 런처 최소화 (메모리 ~50MB)</option>
                        <option value="keep">💻 런처 유지 (메모리 ~100MB)</option>
                    </select>
                    <div class="setting-description">
                        <strong>📊 리소스 효율성:</strong><br>
                        • <span style="color: #27ae60;"><strong>런처 종료</strong></span>: 완전한 리소스 해방, 최대 성능<br>
                        • <span style="color: #f39c12;">런처 최소화</span>: 게임 종료 감지 + 자동 복원<br>
                        • <span style="color: #e74c3c;">런처 유지</span>: 편의성 우선, 리소스 사용 많음
                    </div>
                </div>
                
                <div class="setting-group">
                    <label for="auth-duration">자동 로그인 유지 기간:</label>
                    <select id="auth-duration">
                        <option value="1">1일</option>
                        <option value="3">3일</option>
                        <option value="7">1주일</option>
                        <option value="14">2주일</option>
                        <option value="30">1개월</option>
                        <option value="90" selected>90일 (추천 - Refresh Token 활용)</option>
                    </select>
                    <div class="setting-description">
                        <strong>🔑 자동 로그인 가이드:</strong><br>
                        • <span style="color: #27ae60;"><strong>90일 (추천)</strong></span>: Microsoft Refresh Token 최대 활용<br>
                        • <span style="color: #f39c12;">1개월</span>: 적당한 보안과 편의성<br>
                        • <span style="color: #e74c3c;">1-2주</span>: 높은 보안, 자주 재로그인
                    </div>
                </div>
                
                <div class="setting-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="keep-logins" checked>
                        <span class="checkmark"></span>
                        로그인 정보 저장
                    </label>
                    <div class="setting-description">
                        <small>Microsoft 계정 인증 정보를 안전하게 암호화하여 저장합니다</small>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="settings-save" class="save-button">저장</button>
            </div>
        </div>
    </div>

    <!-- 모듈 로드 -->
    <script type="module">
        // ES6 모듈 지원 확인
        import('./js/utils/constants.js').then(() => {
            console.log('✅ ES6 모듈 지원됨');
        }).catch(() => {
            console.log('⚠️ ES6 모듈 미지원, 기존 방식 사용');
        });
    </script>
    
    <!-- 코어 모듈들 -->
    <script src="js/core/audio.js"></script>
    <script src="js/core/storage.js"></script>
    
    <!-- 유틸리티 모듈들 -->
    <script src="js/utils/constants.js"></script>
    <script src="js/utils/utils.js"></script>
    
    <!-- UI 컴포넌트 모듈들 -->
    <script src="js/ui/modal.js"></script>
    <script src="js/ui/progress.js"></script>
    <script src="js/ui/notification.js"></script>
    <script src="js/ui/settings.js"></script>
    
    <!-- 기능 모듈들 -->
    <script src="js/features/auth/auth.js"></script>
    <script src="js/features/news/news.js"></script>
    <script src="js/features/game/game.js"></script>
    
    <!-- 메인 컨트롤러 -->
    <script src="js/main-controller.js"></script>
    
    <!-- 기존 렌더러 (하위 호환성) -->
    <script src="renderer.js"></script>
</body>
</html> 